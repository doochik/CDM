<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <script type="text/javascript" src="//yandex.st/jquery/1.6.1/jquery.js"></script>
    <title></title>
</head>
<body>
<script type="text/javascript">
    alert('JSON:' + window['JSON']);
    if ('postMessage' in window) {

        $(window).bind('message', function(e) {
            onMessage(e.originalEvent, true);
        });

        if (window.addEventListener) {
            window.addEventListener('message', onMessage, false);
        } else {
            window.attachEvent('onmessage', onMessage);
        }

        window.postMessage('test', 'http://aandrosov-rc.daria2.yandex.ru');
        window.postMessage(42, 'http://aandrosov-rc.daria2.yandex.ru');
        window.postMessage([1,2,3], 'http://aandrosov-rc.daria2.yandex.ru');
        window.postMessage({a:1,b:2}, 'http://aandrosov-rc.daria2.yandex.ru');
    }

    function onMessage(e, jq) {
        alert('jQuery:' + jq + '.postMessage ' + (typeof e.data));
    }
</script>
</body>
</html>